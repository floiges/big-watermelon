window.__require=function t(e,o,c){function r(n,a){if(!o[n]){if(!e[n]){var s=n.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+n+"'")}n=s}var p=o[n]={exports:{}};e[n][0].call(p.exports,function(t){return r(e[n][1][t]||t)},p,p.exports,t,e,o,c)}return o[n].exports}for(var i="function"==typeof __require&&__require,n=0;n<c.length;n++)r(c[n]);return r}({Fruit:[function(t,e,o){"use strict";cc._RF.push(e,"d456bwQXDRJy4/W+AywMpTE","Fruit");var c,r=this&&this.__extends||(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,c){var r,i=arguments.length,n=i<3?e:null===c?c=Object.getOwnPropertyDescriptor(e,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,c);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(n=(i<3?r(n):i>3?r(e,o,n):r(e,o))||n);return i>3&&n&&Object.defineProperty(e,o,n),n};Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator.ccclass,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=0,e}return r(e,t),e.prototype.init=function(t,e){this.id=t,this.node.getComponent(cc.Sprite).spriteFrame=e},e.prototype.start=function(){},e.prototype.onBeginContact=function(t,e,o){if(e instanceof cc.PhysicsCircleCollider&&o instanceof cc.PhysicsCircleCollider){var c=e.node.getComponent("Fruit"),r=o.node.getComponent("Fruit");if(c&&r&&c.id===r.id){var i=new cc.Event.EventCustom("onFruitCompose",!0);i.detail={id:c.id,self:c.node,other:r.node},e.node.dispatchEvent(i)}}},e.prototype.onEndContact=function(t,e,o){e instanceof cc.PhysicsCircleCollider&&o instanceof cc.PhysicsCircleCollider&&console.log("\ud83d\ude80 ~ file: Fruit.ts ~ line 50 ~ Fruit ~ onEndContact ~ self",e.node.position)},i([n],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"8d0612g2r1AZIT0kmqmMCcp","Game");var c,r=this&&this.__extends||(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,c){var r,i=arguments.length,n=i<3?e:null===c?c=Object.getOwnPropertyDescriptor(e,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,c);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(n=(i<3?r(n):i>3?r(e,o,n):r(e,o))||n);return i>3&&n&&Object.defineProperty(e,o,n),n};Object.defineProperty(o,"__esModule",{value:!0});var n=t("./JuiceItem"),a=cc._decorator,s=a.ccclass,u=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fruits=[],e.fruitPrefab=null,e.juices=[],e.juicePrefab=null,e.boomAudio=null,e.waterAudio=null,e.scoreLabel=null,e.isCreating=!1,e.fruitCount=0,e.score=0,e.currentFruit=null,e}return r(e,t),e.prototype.onLoad=function(){this.initPhysics(),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on("onFruitCompose",this.onFruitCompose,this),this.initOneFruit()},e.prototype.start=function(){},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off("onFruitCompose",this.onFruitCompose,this)},e.prototype.initPhysics=function(){var t=cc.director.getPhysicsManager();t.enabled=!0,t.gravity=cc.v2(0,-960),cc.director.getCollisionManager().enabled=!0;var e=this.node.width,o=this.node.height,c=new cc.Node;c.width=e,c.height=o,c.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static;var r=function(t,e,o,c,r){var i=t.addComponent(cc.PhysicsBoxCollider);i.offset.x=e,i.offset.y=o,i.size.width=c,i.size.height=r};r(c,0,-o/2,e,1),r(c,0,o/2,e,1),r(c,-e/2,0,1,o),r(c,e/2,0,1,o),c.parent=this.node},e.prototype.initOneFruit=function(t){void 0===t&&(t=0),this.fruitCount++,this.currentFruit=this.createOneFruitOnPos(0,400,t)},e.prototype.createOneFruit=function(t){var e=cc.instantiate(this.fruitPrefab),o=this.fruits[t];return e.getComponent("Fruit").init(t+1,o),e.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static,e.getComponent(cc.PhysicsCircleCollider).radius=0,this.node.addChild(e),e.scale=.6,e},e.prototype.createOneFruitOnPos=function(t,e,o){var c=this.createOneFruit(o);return c.setPosition(cc.v2(t,e)),c},e.prototype.createFruitJuice=function(t,e,o){var c=cc.instantiate(this.juicePrefab);this.node.addChild(c);var r=this.juices[t],i=c.getComponent("Juice");i.init(r),i.showJuice(e,o)},e.prototype.startFruitPhysics=function(t){t.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic;var e=t.getComponent(cc.PhysicsCircleCollider);e.radius=t.height/2,e.apply()},e.prototype.getNextFruitId=function(){return this.fruitCount<3?0:3===this.fruitCount?1:Math.floor(4*Math.random())+1},e.prototype.updateScore=function(t){this.score+=2*t,this.scoreLabel.string=""+this.score},e.prototype.onTouchStart=function(t){var e=this;if(!this.isCreating){this.isCreating=!0;var o=this.node,c=o.width,r=(o.height,this.currentFruit),i=t.getLocation(),n=i.x;i.y,n-=c/2;var a=cc.sequence(cc.moveBy(.3,cc.v2(n,0)).easing(cc.easeCubicActionIn()),cc.callFunc(function(){e.startFruitPhysics(r),e.scheduleOnce(function(){var t=e.getNextFruitId();e.initOneFruit(t),e.isCreating=!1},1)}));r.runAction(a)}},e.prototype.onFruitCompose=function(t){cc.audioEngine.play(this.boomAudio,!1,1),cc.audioEngine.play(this.waterAudio,!1,1);var e=t.detail,o=e.id,c=e.self,r=e.other;c.removeFromParent(!0),r.removeFromParent(!0);var i=r.x,n=r.y;this.createFruitJuice(o,cc.v2(i,n),r.width),this.updateScore(o);var a=o+1;if(a<=10){var s=this.createOneFruitOnPos(i,n,a);this.startFruitPhysics(s),s.scale=0,cc.tween(s).to(.5,{scale:.6},{easing:"backOut"}).start()}},i([u([cc.SpriteFrame])],e.prototype,"fruits",void 0),i([u(cc.Prefab)],e.prototype,"fruitPrefab",void 0),i([u([n.default])],e.prototype,"juices",void 0),i([u(cc.Prefab)],e.prototype,"juicePrefab",void 0),i([u(cc.AudioClip)],e.prototype,"boomAudio",void 0),i([u(cc.AudioClip)],e.prototype,"waterAudio",void 0),i([u(cc.Label)],e.prototype,"scoreLabel",void 0),i([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./JuiceItem":"JuiceItem"}],JuiceItem:[function(t,e,o){"use strict";cc._RF.push(e,"03e4a5nu2JOI5ItWgPxPcrG","JuiceItem");var c=this&&this.__decorate||function(t,e,o,c){var r,i=arguments.length,n=i<3?e:null===c?c=Object.getOwnPropertyDescriptor(e,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,c);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(n=(i<3?r(n):i>3?r(e,o,n):r(e,o))||n);return i>3&&n&&Object.defineProperty(e,o,n),n};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,n=r.property,a=function(){function t(){this.particle=null,this.circle=null,this.slash=null}return t.prototype.start=function(){},c([n(cc.SpriteFrame)],t.prototype,"particle",void 0),c([n(cc.SpriteFrame)],t.prototype,"circle",void 0),c([n(cc.SpriteFrame)],t.prototype,"slash",void 0),c([i("JuiceItem")],t)}();o.default=a,cc._RF.pop()},{}],Juice:[function(t,e,o){"use strict";cc._RF.push(e,"d9fa9LqAjVIU7SupeaRubz/","Juice");var c,r=this&&this.__extends||(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,c){var r,i=arguments.length,n=i<3?e:null===c?c=Object.getOwnPropertyDescriptor(e,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,c);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(n=(i<3?r(n):i>3?r(e,o,n):r(e,o))||n);return i>3&&n&&Object.defineProperty(e,o,n),n};Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass,s=n.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.particle=null,e.circle=null,e.slash=null,e}return r(e,t),e.prototype.init=function(t){var e=t.particle,o=t.circle,c=t.slash;this.particle=e,this.circle=o,this.slash=c},e.prototype.start=function(){},e.prototype.showJuice=function(t,e){for(var o=function(){var o=new cc.Node("Sprite");o.addComponent(cc.Sprite).spriteFrame=c.particle,o.parent=c.node;var r=359*Math.random(),i=30*Math.random()+e/2,n=cc.v2(Math.sin(r*Math.PI/180)*i,Math.cos(r*Math.PI/180)*i);o.scale=.5*Math.random()+e/100;var a=.5*Math.random();o.setPosition(t),o.runAction(cc.sequence(cc.spawn(cc.moveBy(a,n),cc.scaleTo(a+.5,.3),cc.rotateBy(a+.5,p(-360,360))),cc.fadeOut(.1),cc.callFunc(function(){o.active=!1},c)))},c=this,r=0;r<10;r++)o();for(var i=function(){var o=new cc.Node("Sprite");o.addComponent(cc.Sprite).spriteFrame=n.circle,o.parent=n.node;var c=359*Math.random(),r=30*Math.random()+e/2,i=cc.v2(Math.sin(c*Math.PI/180)*r,Math.cos(c*Math.PI/180)*r);o.scale=.5*Math.random()+e/100;var a=.5*Math.random();o.setPosition(t),o.runAction(cc.sequence(cc.spawn(cc.moveBy(a,i),cc.scaleTo(a+.5,.3)),cc.fadeOut(.1),cc.callFunc(function(){o.active=!1},n)))},n=this,a=0;a<20;a++)i();var s=new cc.Node("Sprite");s.addComponent(cc.Sprite).spriteFrame=this.slash,s.parent=this.node,s.setPosition(t),s.scale=0,s.angle=p(0,360),s.runAction(cc.sequence(cc.spawn(cc.scaleTo(.2,e/150),cc.fadeOut(1)),cc.callFunc(function(){s.active=!1},this)))},i([s(cc.SpriteFrame)],e.prototype,"particle",void 0),i([s(cc.SpriteFrame)],e.prototype,"circle",void 0),i([s(cc.SpriteFrame)],e.prototype,"slash",void 0),i([a],e)}(cc.Component);o.default=u;var p=function(t,e){return Math.floor(Math.random()*(e-t)+t)};cc._RF.pop()},{}]},{},["Fruit","Game","Juice","JuiceItem"]);